//
// Created by Roberts Kalnins on 19/12/2020.
//

#pragma once

#include <ncurses.h>

#include "../logging/logging.h"
#include "spaceship.h"
#include "../config/config.h"


namespace sc::play {

class SpaceshipFactory {

  public:

    SpaceshipFactory ();

    std::unique_ptr< Spaceship > CreateSpaceship ();

    bool PrintStation ( WINDOW *window, int cycle );

    void PrintSpaceship ( WINDOW *window, int y, int x,
                          const std::string &code );

    [[nodiscard]] int GetInitialMoney () const;

  private:

    const std::vector< const std::string > ss_a_ = {
            { R"(/\~~~~~~~~^\__/^\)" },
            { R"(|| <%%> [  ]__  ###)" },
            { R"(\/~~~~~~~~~/  \v/)" },
    };


    const std::vector< const std::string > ss_b_ = {
            { R"(/\@@@\--->)" },
            { R"(> [..].`.`< &&&&)" },
            { R"(\/@@@/--->)" },
    };

    const std::vector< const std::string > ss_c_ = {
            { R"(  (%%%\)" },
            { R"((### ::::<<<<)" },
            { R"(  (%%%/)" },
    };

    // FIXME: move ascii art out of header
    const std::vector< const std::string > station_dep_ = {
            { R"(                         |##################################################################################)" },
            { R"(                         |##################################################################################)" },
            { R"(                         |##################################################################################)" },
            { R"(                         |###################/-------\######################################################)" },
            { R"(                        /^\##################| -{.}- |######################################################)" },
            { R"(                     -=(> %==================| -{.}- |######################################################)" },
            { R"(                        \v/###########|######\-------/######################################################)" },
            { R"(                         |############|#####################################################################)" },
            { R"(                         |############|#####################################################################)" },
            { R"(                        /^\###########|#####################################################################)" },
            { R"(                     -=(> %============#####################################################################)" },
            { R"(                        \v/#################################################################################)" },
            { R"(                         |###############################################===================################)" },
            { R"(                        /################################################|                 |################)" },
            { R"(         /###############################################################|   |             |################)" },
            { R"(       /###########################################[ ]###[  ]############|>--X        |  __]################)" },
            { R"(     /###############=======================#############################|            |    |################)" },
            { R"(   /#################|       [|]           |###########[     ]###########|           X----<|################)" },
            { R"( |###################|  /\~~~~|~~~^\__/^\  |#############################|                 |################)" },
            { R"( |----------/    \&/    || <%%> [  ]__  <        \&/                    \/                 \/               )" },
            { R"(/|\               |     \/~~~~~~~~~/  \v/   [:]>--X                                                         )" },
            { R"(-$-               |       m                                <:>                                              )" },
            { R"(\$/               |\      |                                                            <;>                  )" },
            { R"(                  X-\-----^--          <*>                                                                  )" },
            { R"()" },
            { R"()" },
            { R"()" },
            { R"()" },
            { R"()" },
            { R"()" },
            { R"()" },
            { R"()" },
            { R"(                                                                           <%>|                             )" },
            { R"(/$\                                                                           |^o\                          )" },
            { R"(-$-      <*>          /\    |      /\           /\                          /|I|  "\                        )" },
            { R"(\|/                   ||   /||     ||           ||                         |`|I| ::`|<%>                    )" },
            { R"( |----------\         ||  /@%^\    ||           ||                   /|    | |I| :: |      |\               )" },
            { R"( |#####################| |[:]$ |   ||           |#####################|    |.\v/ * .|      |################)" },
            { R"(   \###################[  \```/ ___][           ]#####[  ]##===#######|     \ .... /       |################)" },
            { R"(     \#################|   ^^^     ||           |#####################|      [@@@@]        |################)" },
            { R"(       \###############==========================#####<||>###[ ]######|  <%>/%\  /%\       |################)" },
            { R"(         \############################################################|     ^^^  ^^^       |################)" },
            { R"(                        \#############################################|>-X                 |################)" },
            { R"(                         |############################################|             <%>    |################)" },
            { R"(                         |############################################|                    |################)" },
            { R"(                         |####################/-------\###############|                    |################)" },
            { R"(                        /^\###################| -{.}- |###############======================################)" },
            { R"(                     -=(> %===================| -{.}- |#####################################################)" },
            { R"(                        \v/###################\-------/#####################################################)" },
            { R"(                         |##################################################################################)" },
            { R"(                         |##################################################################################)" },
            { R"(                         |##################################################################################)" },
            { R"(                         /##################################################################################)" },
            { R"(                        /###################################################################################)" },
            { R"(                       /####################################################################################)" },
            { R"(                      /#####################################################################################)" },
    };

    std::vector< bool > ss_used_ { false, false, false };

    logger_t logger_;

    Range max_weight_;
    Range max_fuel_;
    Range max_hull_;
    Range max_crew_;

    int initial_money_ { 3000 };

    int station_init_x_ { 20 };
    int station_init_y_ { 0 };

};


using shared_spaceship_factory_t = std::shared_ptr< SpaceshipFactory >;

}




